{% comment %}
  Collections List Page Section - Works with versa-page-header
{% endcomment %}

<section class="section-padding bg-white">
  <div class="container">
    <!-- Collections Grid -->
    {% if collections.size > 0 %}
      {% comment %} Build collections array for VersaCollectionGrid {% endcomment %}
      {% capture collections_json %}
      [
        {% for collection in collections %}
          {% unless collection.handle == 'frontpage' %}
            {
              "id": {{ collection.id | json }},
              "title": {{ collection.title | json }},
              {% if collection.description != blank %}
              "description": {{ collection.description | strip_html | truncatewords: 15 | json }},
              {% endif %}
              {% if collection.featured_image %}
              "imageUrl": {{ collection.featured_image | image_url: width: 600, height: 600 | json }},
              "imageAlt": {{ collection.featured_image.alt | default: collection.title | json }},
              {% endif %}
              "url": {{ collection.url | json }},
              "productCount": {{ collection.products_count }}
            }{% unless forloop.last %},{% endunless %}
          {% endunless %}
        {% endfor %}
      ]
      {% endcapture %}

      {% capture collection_grid_props %}
      {
        "collections": {{ collections_json | strip }},
        "showProductCount": true
      }
      {% endcapture %}

      {% render 'react-component', component: 'VersaCollectionGrid', props: collection_grid_props %}
    {% else %}
      <div class="text-center py-16">
        <p class="text-gray-500 text-lg">No collections found.</p>
      </div>
    {% endif %}
  </div>
</section>

{% schema %}
{
  "name": "Collections List",
  "settings": [],
  "presets": [
    {
      "name": "Collections List"
    }
  ]
}
{% endschema %}
