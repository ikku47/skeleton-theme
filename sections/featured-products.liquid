{% comment %}
  Simple Featured Products Section
{% endcomment %}

{% liquid
  assign title = section.settings.title | default: 'Featured Products'
  assign collection = collections[section.settings.collection] | default: collections.all
  assign products_limit = section.settings.products_limit | default: 8
%}

<section class="py-16 bg-white">
  <div class="container">
    <div class="text-center mb-12">
      <h2 class="text-3xl md:text-4xl font-bold text-gray-900 mb-4">{{ title }}</h2>
    </div>
    
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
      {% for product in collection.products limit: products_limit %}
        <div class="card-product group">
          <a href="{{ product.url }}" class="block">
            {% if product.featured_image %}
              <div class="aspect-product overflow-hidden rounded-lg mb-4">
                <img 
                  src="{{ product.featured_image | image_url: width: 400, height: 500 }}" 
                  alt="{{ product.featured_image.alt | escape }}"
                  class="card-product-image w-full h-full object-cover"
                  loading="lazy"
                >
              </div>
            {% endif %}
            
            <div class="space-y-2">
              <h3 class="font-medium text-gray-900 group-hover:text-primary transition-colors">
                {{ product.title }}
              </h3>
              <p class="text-lg font-semibold text-primary">
                {{ product.price | money }}
                {% if product.compare_at_price > product.price %}
                  <span class="text-sm text-gray-500 line-through ml-2">
                    {{ product.compare_at_price | money }}
                  </span>
                {% endif %}
              </p>
            </div>
          </a>
        </div>
      {% endfor %}
    </div>
    
    {% if section.settings.show_view_all %}
      <div class="text-center mt-12">
        <a href="{{ section.settings.view_all_url | default: '/collections/all' }}" class="btn btn-outline">
          View All Products
        </a>
      </div>
    {% endif %}
  </div>
</section>

{% schema %}
{
  "name": "Featured Products",
  "tag": "section",
  "class": "featured-products",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Section Title",
      "default": "Featured Products"
    },
    {
      "type": "collection",
      "id": "collection",
      "label": "Collection",
      "info": "Select a collection to display products from"
    },
    {
      "type": "range",
      "id": "products_limit",
      "label": "Number of products",
      "min": 4,
      "max": 12,
      "step": 4,
      "default": 8
    },
    {
      "type": "checkbox",
      "id": "show_view_all",
      "label": "Show 'View All' button",
      "default": true
    },
    {
      "type": "url",
      "id": "view_all_url",
      "label": "'View All' button URL",
      "default": "/collections/all"
    }
  ],
  "presets": [
    {
      "name": "Featured Products"
    }
  ]
}
{% endschema %}
