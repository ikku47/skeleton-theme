{% comment %}
  Newsletter Signup Section with React component integration
  Features: Email capture, benefits list, discount offer
{% endcomment %}

{% liquid
  assign title = section.settings.title | default: 'Stay in the Loop'
  assign subtitle = section.settings.subtitle | default: 'Get exclusive offers and updates'
  assign description = section.settings.description | default: 'Be the first to know about new products, sales, and special events. Plus, get 10% off your first order!'
  assign placeholder = section.settings.placeholder | default: 'Enter your email address'
  assign button_text = section.settings.button_text | default: 'Subscribe'
  assign discount = section.settings.discount | default: '10%'
%}

{% capture newsletter_props %}
{
  "title": "{{ title | escape }}",
  "subtitle": "{{ subtitle | escape }}",
  "description": "{{ description | escape }}",
  "placeholder": "{{ placeholder | escape }}",
  "buttonText": "{{ button_text | escape }}",
  {% if discount != blank %}
  "discount": "{{ discount | escape }}",
  {% endif %}
  "benefits": [
    {% for block in section.blocks %}
      {% if block.type == 'benefit' %}
        "{{ block.settings.text | escape }}"{% unless forloop.last %},{% endunless %}
      {% endif %}
    {% endfor %}
  ]
}
{% endcapture %}

{% render 'react-component', component: 'NewsletterSignup', props: newsletter_props %}

{% schema %}
{
  "name": "Newsletter Signup",
  "tag": "section",
  "class": "newsletter-section",
  "settings": [
    {
      "type": "header",
      "content": "Content"
    },
    {
      "type": "text",
      "id": "title",
      "label": "Title",
      "default": "Stay in the Loop"
    },
    {
      "type": "text",
      "id": "subtitle",
      "label": "Subtitle",
      "default": "Get exclusive offers and updates"
    },
    {
      "type": "textarea",
      "id": "description",
      "label": "Description",
      "default": "Be the first to know about new products, sales, and special events. Plus, get 10% off your first order!"
    },
    {
      "type": "header",
      "content": "Form Settings"
    },
    {
      "type": "text",
      "id": "placeholder",
      "label": "Email Placeholder",
      "default": "Enter your email address"
    },
    {
      "type": "text",
      "id": "button_text",
      "label": "Button Text",
      "default": "Subscribe"
    },
    {
      "type": "text",
      "id": "discount",
      "label": "Discount Offer",
      "default": "10%",
      "info": "Leave blank to hide discount badge"
    }
  ],
  "blocks": [
    {
      "type": "benefit",
      "name": "Benefit",
      "settings": [
        {
          "type": "text",
          "id": "text",
          "label": "Benefit Text"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Newsletter Signup",
      "blocks": [
        {
          "type": "benefit",
          "settings": {
            "text": "Exclusive discounts and offers"
          }
        },
        {
          "type": "benefit",
          "settings": {
            "text": "Early access to new products"
          }
        },
        {
          "type": "benefit",
          "settings": {
            "text": "Style tips and inspiration"
          }
        },
        {
          "type": "benefit",
          "settings": {
            "text": "Special event invitations"
          }
        }
      ]
    }
  ]
}
{% endschema %}
